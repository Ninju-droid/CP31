#include <bits/stdc++.h>
using namespace std;
#define ll long long 
#define endl '\n'

void fun(){
    ll n,m;cin>>n>>m; 
    vector<pair<ll,ll>>a(m);
    for(ll i=0;i<m;i++){
        cin>>a[i].first>>a[i].second;
    }
    vector<ll>ad[n+1];
    for(ll i=0;i<m;i++){
        ll u = a[i].first;
        ll v = a[i].second;
        ad[u].push_back(v);
        ad[v].push_back(u);
    }
    ll ans = 0;
    ll val = n+1;
    for(ll i=n;i>0;i--){
        ad[i].push_back(n+1);
        sort(ad[i].begin(),ad[i].end());
        val = min(*upper_bound(ad[i].begin(), ad[i].end(), i),val);
        ans += (val-i);
    }
    cout<<ans<<endl;
}

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(nullptr);
#ifndef ONLINE_JUDGE
    freopen("Input.txt", "r", stdin);
    freopen("Output.txt", "w", stdout);
#endif
    int t;
    cin >> t;
    while (t--) fun();
    return 0;
}
